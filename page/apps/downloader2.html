<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1.0">
	<meta name="theme-color" content="#000000">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link rel="stylesheet" href="../../style.css" type="text/css" media="all" />
	<title>File Downloader</title>
	<style>
		input {
			width: 100%;
			margin-bottom: 9px;
		}
	</style>
</head>
<body>
	<div class="text">
		<header>
			<nav>
				<div class="hamburger">
					<a class="hamburger-menu" href="../../about.html">&#9776;</a><font class="font-margin">Justin LRT</font>
				</div>
			</nav>
		</header>
		<div class="title">
			<h1>File Downloader</h1>
		</div>
		<div class="box3">
			<a href="javascript:window.history.back();">Back</a>
			<br>
			<a href="../../home.html">Home</a> &#8594; <a href="../apps.html">Web Apps</a>
		</div>
		<div class="box2">
			Paste URL of image, video, pdf, and other files to download.
			<br>
			<br>
			<form action="#">
				<input id="clear" type="url" placeholder="Paste File URL" required>
				<br>
				<button>Download File</button>
				<button type="reset" onclick="cleartxt()">Clear</button>
			</form>
		</div>
		<div class="box2">
			<h2>What is File Downloader by Justin LRT?</h2>
			File downloader is the web-based app to download files without requiring an mobile app. This can support many types of file that we used in everyday life.
		</div>
		<div class="box2">
			<h2>How to download the file?</h2>
			<ol>
				<li>Copy the link that you want to download.</li>
				<li>Paste the link above and click download file.</li>
				<li>The download will start in a short quick and wait until the download is finished.</li>
				<li>The file is now downloaded, you can enjoy the file you've downloaded.</li>
			</ol>
			<br>Make sure that the URL you've copied is ended with a file extension such as <i>.pdf, .svg, .jpg, .png, .gif, .mp4, .mp3, .html,</i> and so on, otherwise the error message prompt.
		</div>
		<div class="box2">
			<h2>File type supported</h2>
			While this downloader may support most of existing file types. This include images, videos, text, etc.
			<br>
			<br><i>* Please note that audio, files, images, videos, and text can't be downloaded without the file extension. This includes media files from Facebook and YouTube.</i>
		</div>
		<footer id="footerB"></footer>
	</div>
	<script type='text/javascript' src='../../script/jquery.min.js'></script>
	<script src="../../script.js" type="text/javascript" charset="utf-8"></script>
	<script src="../../script/footer/footerB.js" type="text/javascript" charset="utf-8"></script>
	<script>
		const fileInput = document.querySelector("input"),

		downloadBtn = document.querySelector("button");

		downloadBtn.addEventListener("click", e => {
			e.preventDefault();
			downloadBtn.innerText = "Downloading file...";
			fetchFile(fileInput.value);
		});

		function fetchFile(url) {
			fetch(url).then(res => res.blob()).then(file => {
				let tempUrl = URL.createObjectURL(file);
				const aTag = document.createElement("a");
				aTag.href = tempUrl;
				const fileName = "Justin LRT - Downloader"; // You can customize this name
				const extension = url.split('.').pop(); // Extract file extension from the URL
				aTag.download = `${fileName}.${extension}`;
				document.body.appendChild(aTag);
				aTag.click();
				downloadBtn.innerText = "Download File";
				URL.revokeObjectURL(tempUrl);
				aTag.remove();
			}).catch(() => {
				alert("Failed to download file! Make sure the URL is correct.");
				downloadBtn.innerText = "Download File";
			});
		}
		function cleartxt() {
			document.getElementById("clear").value = "";
		}

	</script>
	<noscript>
		<br>
		<div class="box3 center-text">
			<h2>JavaScript is need to be enabled!</h2>
			You must have JavaScript enabled in your browser's settings to show the contents!
			<br>
			<br>Are you using HTML viewer? Open as browser instead.
			<br>
			<br>Done? Try refreshing the page.
		</div>
	</noscript>
	<script type="text/javascript">
		$(document).ready(function() {
			$('.text').show();
		});
	</script>
</body>
</html>